(function(){var e={7501:function(){},1213:function(e,t,o){"use strict";var a=o(6369),r=function(){var e=this,t=e._self._c;return t("div",[t("Navbar"),t("div",{attrs:{id:"app"}},[t("router-view")],1),t("FooterBar")],1)},s=[],i=function(){var e=this,t=e._self._c;return t("div",[t("header",{staticClass:"main-header"},[t("div",{staticClass:"container"},[t("button",{staticClass:"navbar-toggler",on:{click:e.toggleNavbar}},[t("span",{staticClass:"navbar-toggler-icon"})]),t("div",{class:{"navbar-open":e.isNavbarOpen}},[t("ul",{staticClass:"navbar-nav"},[t("li",{staticClass:"nav-item"},[t("router-link",{staticClass:"nav-link",attrs:{to:"/dashboard",exact:""}},[e._v("Home")])],1),e.userRoles.includes(4)?t("li",{staticClass:"nav-item"},[t("router-link",{staticClass:"nav-link",attrs:{to:"/cooperatives/new"}},[e._v("Cooperative Form")])],1):e._e(),e.userRoles.includes(1)?t("li",{staticClass:"nav-item"},[t("router-link",{staticClass:"nav-link",attrs:{to:"/users"}},[e._v("Users")])],1):e._e(),e.userRoles.includes(5)?t("li",{staticClass:"nav-item"},[t("router-link",{staticClass:"nav-link",attrs:{to:"/cooperatives"}},[e._v("Cooperatives")])],1):e._e(),e.userRoles.includes(4)?t("li",{staticClass:"nav-item"},[t("router-link",{staticClass:"nav-link",attrs:{to:"/your-cooperative/:id"}},[e._v("My Cooperative")])],1):e._e()])]),e.userRoles.length>0?t("div",{staticClass:"user-roles"},[t("p",{attrs:{id:"User_roles"}},[e._v("User Roles: "+e._s(e.userRoles.join(", ")))]),t("button",{staticClass:"logout-button",on:{click:e.logout}},[t("span",[e._v("Logout")])])]):e._e()])])])},n=[],l=(o(560),o(1076)),c={data(){return{userRoles:[],isNavbarOpen:!1}},created(){this.fetchUserRole()},methods:{fetchUserRole(){const e=localStorage.getItem("jwt");l.Z.get("http://localhost:9090/api/user/roles",{headers:{Authorization:"Bearer "+e}}).then((e=>{this.userRoles=e.data})).catch((e=>{console.error("Error fetching user roles:",e)}))},async logout(){try{const e=window.confirm("Are you sure you want to logout?");e&&(localStorage.removeItem("jwt"),localStorage.removeItem("user"),this.$router.push("/login"),window.location.reload())}catch(e){console.error("Logout error:",e)}},toggleNavbar(){this.isNavbarOpen=!this.isNavbarOpen}}},u=c,p=o(1001),v=(0,p.Z)(u,i,n,!1,null,"8d741b6c",null),d=v.exports,m=function(){var e=this;e._self._c;return e._m(0)},h=[function(){var e=this,t=e._self._c;return t("footer",{staticClass:"footer-bar"},[t("div",{staticClass:"footer-content"},[t("p",[e._v("Â© 2024 Agricultural Cooperatives. All rights reserved.")]),t("div",{staticClass:"names-box"},[t("div",{staticClass:"name-box"},[t("p",{staticClass:"name"},[e._v("it2021113 Giorgos Nicolaides")])]),t("div",{staticClass:"name-box"},[t("p",{staticClass:"name"},[e._v("it2021154 Panagiotis Foteinopoulos")])]),t("div",{staticClass:"name-box"},[t("p",{staticClass:"name"},[e._v("it2021088 Andreas Rousounelos")])])]),t("div",{staticClass:"social-icons"},[t("a",{attrs:{href:"#",target:"_blank"}},[t("i",{staticClass:"fab fa-facebook"})]),t("a",{attrs:{href:"#",target:"_blank"}},[t("i",{staticClass:"fab fa-twitter"})]),t("a",{attrs:{href:"#",target:"_blank"}},[t("i",{staticClass:"fab fa-linkedin"})])])])])}],f={},_=f,g=(0,p.Z)(_,m,h,!1,null,"b7a27af4",null),b=g.exports,C={name:"App",components:{Navbar:d,FooterBar:b}},y=C,w=(0,p.Z)(y,r,s,!1,null,null,null),D=w.exports,x=o(2631),N=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("h1",[e._v("Login")]),t("form",{staticClass:"login-form",on:{submit:function(t){return t.preventDefault(),e.loginUser.apply(null,arguments)}}},[t("label",{attrs:{for:"username"}},[e._v("Username:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"input-field",attrs:{type:"text",required:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),t("label",{attrs:{for:"password"}},[e._v("Password:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input-field",attrs:{type:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),t("button",{staticClass:"loginButton",attrs:{type:"submit"}},[e._v("Login")]),t("div",{staticClass:"signup-link"},[t("p",[e._v("Don't have an account? "),t("router-link",{attrs:{to:"/signup"}},[e._v("Sign Up")])],1)])])])},$=[],U={data(){return{username:"",password:""}},methods:{loginUser(){l.Z.post("http://localhost:9090/api/auth/signin",{username:this.username,password:this.password}).then((e=>{console.log(e.data),this.updateUserDetails(e.data);const t=e.data.accessToken;localStorage.setItem("jwt",t),this.$router.push("/dashboard"),window.location.reload()})).catch((e=>{console.error(e)}))},updateUserDetails(e){localStorage.setItem("user",JSON.stringify(e))}}},S=U,k=(0,p.Z)(S,N,$,!1,null,"a5f935f2",null),P=k.exports,j=function(){var e=this,t=e._self._c;return t("div",{staticClass:"signup-container"},[t("h1",[e._v("Sign Up")]),t("form",{staticClass:"signup-form",on:{submit:function(t){return t.preventDefault(),e.registerUser.apply(null,arguments)}}},[t("label",{attrs:{for:"username"}},[e._v("Username:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"input-field",attrs:{type:"text",required:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),t("label",{attrs:{for:"email"}},[e._v("Email:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"input-field",attrs:{type:"email",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),t("label",{attrs:{for:"password"}},[e._v("Password:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input-field",attrs:{type:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),t("button",{staticClass:"signUpButton",attrs:{type:"submit"}},[e._v("Sign Up")])]),e.submissionCompleted?t("strong",{staticClass:"success-message"},[e._v(" Signed Up - Go to "),t("router-link",{attrs:{to:"/login"}},[e._v("Login")])],1):e._e()])},R=[],E={data(){return{username:"",email:"",password:"",submissionCompleted:!1}},methods:{registerUser(){l.Z.post("http://localhost:9090/api/auth/signup",{username:this.username,email:this.email,password:this.password}).then((e=>{console.log(e.data),this.submissionCompleted=!0})).catch((e=>{console.error(e)}))}}},Z=E,A=(0,p.Z)(Z,j,R,!1,null,"d7242d72",null),I=A.exports,O=function(){var e=this,t=e._self._c;return t("div",{staticClass:"user-list-scroll-container"},[t("h2",[e._v("All Cooperatives:")]),t("div",{staticClass:"cooperatives-list"},[t("table",[e._m(0),t("tbody",e._l(e.cooperatives,(function(o){return t("tr",{key:o.id,staticClass:"cooperative-item"},[t("td",[e._v(e._s(o.name))]),t("td",[e._v(e._s(o.vat))]),t("td",[t("router-link",{staticClass:"link",attrs:{to:{name:"CooperativeDetails",params:{id:o.id}}}},[e._v(" View Details ")])],1)])})),0)])])])},B=[function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"cooperative-header"},[t("th",[e._v("Name")]),t("th",[e._v("VAT")]),t("th",[e._v("Details")])])])}],q={data(){return{cooperatives:[]}},created(){this.fetchCooperatives()},methods:{fetchCooperatives(){const e=localStorage.getItem("jwt");l.Z.get("http://localhost:9090/api/cooperative",{headers:{Authorization:"Bearer "+e}}).then((e=>{this.cooperatives=e.data})).catch((e=>{console.error("Error fetching cooperatives",e)}))}}},z=q,T=(0,p.Z)(z,O,B,!1,null,"25370b6b",null),L=T.exports,F=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("h2",[e._v("Fill in the Form")]),t("div",{staticClass:"cooperative-form"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.saveCooperative.apply(null,arguments)}}},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"name"}},[e._v("Name:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.cooperative.name,expression:"cooperative.name"}],attrs:{type:"text",id:"name",required:""},domProps:{value:e.cooperative.name},on:{input:function(t){t.target.composing||e.$set(e.cooperative,"name",t.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"vat"}},[e._v("VAT:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.cooperative.vat,expression:"cooperative.vat"}],attrs:{type:"text",id:"vat",required:""},domProps:{value:e.cooperative.vat},on:{input:function(t){t.target.composing||e.$set(e.cooperative,"vat",t.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"product_name"}},[e._v("Product Name:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.cooperative.product_name,expression:"cooperative.product_name"}],attrs:{type:"text",id:"product_name",required:""},domProps:{value:e.cooperative.product_name},on:{input:function(t){t.target.composing||e.$set(e.cooperative,"product_name",t.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"product_category"}},[e._v("Product Category:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.cooperative.product_category,expression:"cooperative.product_category"}],attrs:{id:"product_name",required:""},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.cooperative,"product_category",t.target.multiple?o:o[0])}}},[t("option",{attrs:{value:"fruits"}},[e._v("Fruits")]),t("option",{attrs:{value:"vegetables"}},[e._v("Vegetables")]),t("option",{attrs:{value:"dairy"}},[e._v("Dairy")]),t("option",{attrs:{value:"spices"}},[e._v("Spices")])])]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"cultivation_city"}},[e._v("City:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.cooperative.cultivation_city,expression:"cooperative.cultivation_city"}],attrs:{type:"text",id:"cultivation_city",required:""},domProps:{value:e.cooperative.cultivation_city},on:{input:function(t){t.target.composing||e.$set(e.cooperative,"cultivation_city",t.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"cultivation_address"}},[e._v("Address:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.cooperative.cultivation_address,expression:"cooperative.cultivation_address"}],attrs:{type:"text",id:"cultivation_address",required:""},domProps:{value:e.cooperative.cultivation_address},on:{input:function(t){t.target.composing||e.$set(e.cooperative,"cultivation_address",t.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"cultivation_street_number"}},[e._v("Street Number:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.cooperative.cultivation_street_number,expression:"cooperative.cultivation_street_number"}],attrs:{type:"text",id:"cultivation_street_number",required:""},domProps:{value:e.cooperative.cultivation_street_number},on:{input:function(t){t.target.composing||e.$set(e.cooperative,"cultivation_street_number",t.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"members"}},[e._v("Members:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.cooperative.members,expression:"cooperative.members"}],attrs:{id:"product_name",required:""},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.cooperative,"members",t.target.multiple?o:o[0])}}},[t("option",{attrs:{value:"1-5"}},[e._v("1-5")]),t("option",{attrs:{value:"5-10"}},[e._v("5-10")]),t("option",{attrs:{value:"10-20"}},[e._v("10-20")]),t("option",{attrs:{value:"20-40"}},[e._v("20-40")]),t("option",{attrs:{value:"40+"}},[e._v("40+")])])]),t("button",{staticClass:"saveButton",attrs:{type:"submit"}},[e._v("Save")])]),t("strong",[e.submissionCompleted?t("div",{staticClass:"success-message"},[e._v("Submission Completed")]):e._e()])])])},M=[],V={data(){return{cooperative:{name:"",vat:"",product_name:""},submissionCompleted:!1}},methods:{saveCooperative(){const e=localStorage.getItem("jwt");l.Z.post("http://localhost:9090/api/cooperative/new",this.cooperative,{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}).then((e=>{console.log("Cooperative saved successfully",e.data),this.submissionCompleted=!0})).catch((e=>{console.error("Error saving cooperative",e)}))}}},J=V,G=(0,p.Z)(J,F,M,!1,null,"39ccf59f",null),Y=G.exports,H=function(){var e=this,t=e._self._c;return t("div",[t("p",[e._v("Name: "+e._s(e.cooperativeDetails.name))]),t("p",[e._v("VAT: "+e._s(e.cooperativeDetails.vat))]),t("p",[e._v("Product Name: "+e._s(e.cooperativeDetails.product_name))]),t("p",[e._v("Status: "+e._s(e.cooperativeDetails.status))]),t("p",[e._v("Notes: "+e._s(e.cooperativeDetails.notes))]),t("button",{staticClass:"editB",on:{click:e.editCooperative}},[e._v("Edit")]),t("button",{staticClass:"deleteB",on:{click:e.deleteCooperative}},[e._v("Delete")]),t("button",{staticClass:"approveB",on:{click:function(t){return e.approveCooperative(e.cooperativeDetails.id)}}},[e._v("Approve")]),t("button",{staticClass:"rejectB",on:{click:function(t){return e.rejectCooperative(e.cooperativeDetails.id)}}},[e._v("Reject")]),t("p",[e._v("Your User ID as Moderator is: "+e._s(e.userDetails.id))])])},K=[],Q={data(){return{cooperativeDetails:{},userDetails:{}}},created(){this.fetchCooperativeDetails(),this.fetchUserDetails()},methods:{fetchUserDetails(){const e=localStorage.getItem("user");if(!e)return null;this.userDetails=JSON.parse(e)},fetchCooperativeDetails(){const e=localStorage.getItem("jwt"),t=this.$route.params.id;l.Z.get(`http://localhost:9090/api/cooperative/${t}`,{headers:{Authorization:"Bearer "+e}}).then((e=>{this.cooperativeDetails=e.data})).catch((e=>{console.error("Error fetching cooperative details",e)}))},approveCooperative(e){const t=prompt("Enter notes for approval:");if(null!==t){const o=localStorage.getItem("jwt"),a=this.userDetails.id;l.Z.post(`http://localhost:9090/api/user/employee/${a}/${e}/check/submit`,{notes:t},{headers:{Authorization:"Bearer "+o,"Content-Type":"application/json"}}).then((e=>{console.log("Cooperative approved successfully",e.data),this.fetchCooperativeDetails()})).catch((e=>{console.error("Error approving cooperative",e)}))}},rejectCooperative(e){const t=prompt("Enter notes for rejection:");if(null!==t){const o=localStorage.getItem("jwt"),a=this.userDetails.id;l.Z.post(`http://localhost:9090/api/user/employee/${a}/${e}/check/submit-reject`,{notes:t},{headers:{Authorization:"Bearer "+o,"Content-Type":"application/json"}}).then((e=>{console.log("Cooperative rejected successfully",e.data),this.fetchCooperativeDetails()})).catch((e=>{console.error("Error rejecting cooperative",e)}))}},editCooperative(){const e=this.$route.params.id;this.$router.push(`/cooperatives/${e}/edit`)},deleteCooperative(){const e=localStorage.getItem("jwt"),t=this.$route.params.id;l.Z.delete(`http://localhost:9090/api/cooperative/${t}`,{headers:{Authorization:"Bearer "+e}}).then((e=>{console.log("Cooperative deleted successfully",e.data),this.$router.push("/cooperatives")})).catch((e=>{console.error("Error deleting cooperative",e)}))},logout(){localStorage.removeItem("jwt"),localStorage.removeItem("user"),this.$router.push("/login")}}},W=Q,X=(0,p.Z)(W,H,K,!1,null,"2b4282c8",null),ee=X.exports,te=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"form-container"},[t("form",{staticClass:"cooperative-form",on:{submit:function(t){return t.preventDefault(),e.saveCooperative.apply(null,arguments)}}},[t("label",{attrs:{for:"name"}},[e._v("Name:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.cooperative.name,expression:"cooperative.name"}],attrs:{type:"text",id:"name",required:""},domProps:{value:e.cooperative.name},on:{input:function(t){t.target.composing||e.$set(e.cooperative,"name",t.target.value)}}}),t("label",{attrs:{for:"vat"}},[e._v("VAT:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.cooperative.vat,expression:"cooperative.vat"}],attrs:{type:"text",id:"vat",required:""},domProps:{value:e.cooperative.vat},on:{input:function(t){t.target.composing||e.$set(e.cooperative,"vat",t.target.value)}}}),t("label",{attrs:{for:"product_name"}},[e._v("Product Name:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.cooperative.product_name,expression:"cooperative.product_name"}],attrs:{type:"text",id:"product_name",required:""},domProps:{value:e.cooperative.product_name},on:{input:function(t){t.target.composing||e.$set(e.cooperative,"product_name",t.target.value)}}}),t("label",{attrs:{for:"product_category"}},[e._v("Product Category:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.cooperative.product_category,expression:"cooperative.product_category"}],attrs:{type:"text",id:"product_category",required:""},domProps:{value:e.cooperative.product_category},on:{input:function(t){t.target.composing||e.$set(e.cooperative,"product_category",t.target.value)}}}),t("button",{attrs:{type:"submit"}},[e._v("Save")])])])])},oe=[],ae={data(){return{cooperative:{name:"",vat:"",product_name:""}}},created(){const e=this.$route.params.id;this.fetchCooperativeDetails(e)},methods:{fetchCooperativeDetails(e){const t=localStorage.getItem("jwt");l.Z.get(`http://localhost:9090/api/cooperative/${e}`,{headers:{Authorization:"Bearer "+t}}).then((e=>{this.cooperative=e.data})).catch((e=>{console.error("Error fetching cooperative details",e)}))},saveCooperative(){const e=localStorage.getItem("jwt");l.Z.post("http://localhost:9090/api/cooperative/new",this.cooperative,{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}).then((e=>{console.log("Cooperative saved successfully",e.data);const t=this.$route.params.id;this.$router.push(`/cooperatives/${t}`)})).catch((e=>{console.error("Error saving cooperative",e)}))}}},re=ae,se=(0,p.Z)(re,te,oe,!1,null,"52982577",null),ie=se.exports,ne=function(){var e=this,t=e._self._c;return t("div",{staticClass:"user-list-scroll-container"},[t("h2",[e._v("List of Users:")]),t("div",{staticClass:"user-list-container"},[t("table",[e._m(0),t("tbody",e._l(e.users,(function(o){return t("tr",{key:o.id},[t("td",[t("span",{staticClass:"label"},[e._v("Username:")]),e._v(" "+e._s(o.username)+" ")]),t("td",[t("router-link",{staticClass:"link",attrs:{to:{name:"userDetails",params:{id:o.id}}}},[e._v(" View Details ")])],1)])})),0)])])])},le=[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("Username")]),t("th",[e._v("Action")])])])}],ce={data(){return{users:[]}},created(){this.fetchUsers()},methods:{fetchUsers(){const e=localStorage.getItem("jwt");l.Z.get("http://localhost:9090/api/user",{headers:{Authorization:"Bearer "+e}}).then((e=>{this.users=e.data})).catch((e=>{console.error("Error fetching users",e)}))}}},ue=ce,pe=(0,p.Z)(ue,ne,le,!1,null,"7efcc1eb",null),ve=pe.exports,de=function(){var e=this,t=e._self._c;return t("div",{staticClass:"details"},[t("div",{staticClass:"user-details-box"},[t("h1",[e._v("User Details")]),t("p",[e._v("Name: "+e._s(e.userDetails.username))]),t("p",[e._v("Encrypted Password: "+e._s(e.userDetails.password))]),t("p",[e._v("Email: "+e._s(e.userDetails.email))]),t("button",{staticClass:"edit-button",on:{click:e.editUser}},[e._v("Edit")]),t("button",{staticClass:"delete-button",on:{click:e.deleteUser}},[e._v("Delete")])]),t("div",{staticClass:"system-roles-box"},[t("h1",[e._v("System Roles & Authorities")]),t("p",[e._v("Roles: ADMIN (Number: 1)")]),t("p",[e._v("Roles: USER (Number: 4)")]),t("p",[e._v("Roles: MODERATOR (Number: 5)")]),t("button",{staticClass:"addRole",on:{click:e.addRolePrompt}},[e._v("Add Role")]),t("button",{staticClass:"deleteRole",on:{click:e.deleteRolePrompt}},[e._v("Delete Role")])])])},me=[],he={data(){return{userDetails:{}}},created(){this.fetchUserDetails()},methods:{fetchUserDetails(){const e=localStorage.getItem("jwt"),t=this.$route.params.id;l.Z.get(`http://localhost:9090/api/user/admin/${t}`,{headers:{Authorization:"Bearer "+e}}).then((e=>{this.userDetails=e.data})).catch((e=>{console.error("Error fetching user details",e)}))},addRolePrompt(){const e=this.$route.params.id,t=prompt("Enter role number to add:");null!==t&&this.addRole(e,t)},deleteRolePrompt(){const e=this.$route.params.id,t=prompt("Enter role number to delete:");null!==t&&this.deleteRole(e,t)},addRole(e,t){const o=localStorage.getItem("jwt");l.Z.post(`http://localhost:9090/api/user/admin/role/add/${e}/${t}`,null,{headers:{Authorization:"Bearer "+o}}).then((e=>{console.log("Role added successfully",e.data),this.fetchUserDetails()})).catch((e=>{console.error("Error adding role to user",e)}))},deleteRole(e,t){const o=localStorage.getItem("jwt");l.Z.post(`http://localhost:9090/api/user/admin/role/delete/${e}/${t}`,null,{headers:{Authorization:"Bearer "+o}}).then((e=>{console.log("Role deleted successfully",e.data),this.fetchUserDetails()})).catch((e=>{console.error("Error deleting role from user",e)}))},editUser(){const e=this.$route.params.id;this.$router.push(`/users/${e}/edit`)},deleteUser(){const e=localStorage.getItem("jwt"),t=this.$route.params.id;l.Z.delete(`http://localhost:9090/api/user/admin/${t}`,{headers:{Authorization:"Bearer "+e}}).then((e=>{console.log("User deleted successfully",e.data),this.$router.push("/users")})).catch((e=>{console.error("Error deleting user",e)}))}}},fe=he,_e=(0,p.Z)(fe,de,me,!1,null,"1032578e",null),ge=_e.exports,be=function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-container"},[t("form",{staticClass:"user-form",on:{submit:function(t){return t.preventDefault(),e.updateUser.apply(null,arguments)}}},[t("label",{attrs:{for:"username"}},[e._v("Username:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.userDetails.username,expression:"userDetails.username"}],attrs:{type:"text",id:"username",required:""},domProps:{value:e.userDetails.username},on:{input:function(t){t.target.composing||e.$set(e.userDetails,"username",t.target.value)}}}),t("label",{attrs:{for:"email"}},[e._v("Email:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.userDetails.email,expression:"userDetails.email"}],attrs:{type:"email",id:"email",required:""},domProps:{value:e.userDetails.email},on:{input:function(t){t.target.composing||e.$set(e.userDetails,"email",t.target.value)}}}),t("label",{attrs:{for:"password"}},[e._v("Password:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.userDetails.password,expression:"userDetails.password"}],attrs:{type:"password",id:"password",required:""},domProps:{value:e.userDetails.password},on:{input:function(t){t.target.composing||e.$set(e.userDetails,"password",t.target.value)}}}),t("button",{staticClass:"update-button",attrs:{type:"submit"}},[e._v("Update")])])])},Ce=[],ye={data(){return{userDetails:{username:"",email:"",password:""}}},created(){const e=this.$route.params.id;this.fetchUserDetails(e)},methods:{fetchUserDetails(e){const t=localStorage.getItem("jwt");l.Z.get(`http://localhost:9090/api/user/admin/${e}`,{headers:{Authorization:"Bearer "+t}}).then((e=>{this.userDetails=e.data})).catch((e=>{console.error("Error fetching user details",e)}))},updateUser(){const e=this.$route.params.id,t=localStorage.getItem("jwt");l.Z.post("http://localhost:9090/api/user/new",this.userDetails,{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((t=>{console.log("User updated successfully",t.data),this.$router.push(`/users/${e}`)})).catch((e=>{console.error("Error updating user",e)}))}}},we=ye,De=(0,p.Z)(we,be,Ce,!1,null,"f8a8b234",null),xe=De.exports,Ne=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div")},$e=[],Ue=o(7501),Se=o.n(Ue),ke=Se(),Pe=(0,p.Z)(ke,Ne,$e,!1,null,"7facb233",null),je=Pe.exports,Re=function(){var e=this,t=e._self._c;return t("div",{staticClass:"cooperative-details"},[e.cooperativeDetails.name?t("table",[t("tr",[e._m(0),t("td",[e._v(e._s(e.cooperativeDetails.name))])]),e.cooperativeDetails.status?t("tr",[e._m(1),t("td",[e._v(e._s(e.cooperativeDetails.status))])]):e._e(),e.cooperativeDetails.notes?t("tr",[e._m(2),t("td",[e._v(e._s(e.cooperativeDetails.notes))])]):e._e(),t("tr",[e._m(3),t("td",[e._v(e._s(e.userDetails.id))])])]):e._e(),e.approvedNotes?t("p",[t("strong",[e._v("Notes:")]),e._v(" "+e._s(e.approvedNotes))]):e._e(),e.cooperatives.length?t("div",[t("h2",[e._v("Cooperatives:")]),t("table",[e._m(4),t("tbody",e._l(e.cooperatives,(function(o){return t("tr",{key:o.id},[t("td",[e._v(e._s(o.name))]),t("td",[e._v(e._s(o.status))]),t("td",[e._v(e._s(o.notes))])])})),0)])]):e._e()])},Ee=[function(){var e=this,t=e._self._c;return t("td",[t("strong",[e._v("Name:")])])},function(){var e=this,t=e._self._c;return t("td",[t("strong",[e._v("Status:")])])},function(){var e=this,t=e._self._c;return t("td",[t("strong",[e._v("Notes:")])])},function(){var e=this,t=e._self._c;return t("td",[t("strong",[e._v("User ID:")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("Name")]),t("th",[e._v("Status")]),t("th",[e._v("Notes")])])])}],Ze={data(){return{cooperativeDetails:{},userDetails:{},cooperatives:[],approvedStatus:"",approvedNotes:""}},async created(){await this.fetchUserDetails(),this.fetchCooperatives()},methods:{async fetchUserDetails(){const e=localStorage.getItem("user");if(!e)return null;this.userDetails=JSON.parse(e)},async fetchCooperatives(){const e=localStorage.getItem("jwt");if(!this.userDetails.id)return void console.error("User ID is undefined.");const t=this.userDetails.id;try{const o=await l.Z.get(`http://localhost:9090/api/cooperative/user/${t}/cooperatives/details`,{headers:{Authorization:"Bearer "+e}});this.cooperatives=o.data}catch(o){console.error("Error fetching cooperatives",o)}}},beforeRouteEnter(e,t,o){o((t=>{e.query.status&&(t.approvedStatus=e.query.status),e.query.notes&&(t.approvedNotes=e.query.notes)}))}},Ae=Ze,Ie=(0,p.Z)(Ae,Re,Ee,!1,null,"493af539",null),Oe=Ie.exports;a.ZP.use(x.ZP);const Be=[{path:"/",redirect:"/login"},{path:"/login",component:P},{path:"/signup",component:I},{path:"/cooperatives",name:"CooperativeList",component:L},{path:"/cooperatives/new",name:"CooperativeForm",component:Y},{path:"/cooperatives/:id",name:"CooperativeDetails",component:ee},{path:"/cooperatives/:id/edit",name:"CooperativeEdit",component:ie},{path:"/users",name:"userList",component:ve},{path:"/users/:id",name:"userDetails",component:ge},{path:"/users/:id/edit",name:"UserEdit",component:xe},{path:"/your-cooperative/:id",name:"YourCooperative",component:Oe},{path:"/home",name:"Dashboard",component:je}],qe=new x.ZP({mode:"history",base:"/",routes:Be});qe.beforeEach(((e,t,o)=>{const a=localStorage.getItem("userRole"),r={ROLE_USER:["CooperativeForm"],ROLE_ADMIN:["UserDetails","UserEdit","UserList"],ROLE_MODERATOR:["CooperativeEdit","CooperativeList","CooperativeDetails"]};e.name&&r[a]&&!r[a].includes(e.name)?o("/"):o()}));var ze=qe;a.ZP.config.devtools=!0,a.ZP.config.productionTip=!1,new a.ZP({router:ze,render:e=>e(D)}).$mount("#app")}},t={};function o(a){var r=t[a];if(void 0!==r)return r.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,o),s.exports}o.m=e,function(){var e=[];o.O=function(t,a,r,s){if(!a){var i=1/0;for(u=0;u<e.length;u++){a=e[u][0],r=e[u][1],s=e[u][2];for(var n=!0,l=0;l<a.length;l++)(!1&s||i>=s)&&Object.keys(o.O).every((function(e){return o.O[e](a[l])}))?a.splice(l--,1):(n=!1,s<i&&(i=s));if(n){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[a,r,s]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,s,i=a[0],n=a[1],l=a[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(r in n)o.o(n,r)&&(o.m[r]=n[r]);if(l)var u=l(o)}for(t&&t(a);c<i.length;c++)s=i[c],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(u)},a=self["webpackChunkmyfrontend"]=self["webpackChunkmyfrontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[998],(function(){return o(1213)}));a=o.O(a)})();
//# sourceMappingURL=app.dbc6f0d1.js.map